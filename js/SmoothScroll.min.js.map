{"version":3,"sources":["SmoothScroll.js"],"names":["initTest","options","keyboardSupport","addEvent","keydown","init","initDone","document","body","html","documentElement","windowHeight","window","innerHeight","scrollHeight","root","compatMode","indexOf","activeElement","top","self","isFrame","offsetHeight","fullPageElem","createElement","style","cssText","appendChild","pendingRefresh","refreshSize","setTimeout","isExcluded","height","config","attributes","childList","characterData","observer","MutationObserver","observe","clearfix","clear","fixedBackground","backgroundAttachment","scrollArray","elem","left","directionCheck","accelerationMax","elapsed","Date","now","lastScroll","accelerationDelta","factor","Math","min","que","push","x","y","lastX","lastY","start","pending","scrollWindow","step","time","scrollX","scrollY","i","length","item","finished","animationTime","position","pulseAlgorithm","pulse","splice","scrollBy","scrollLeft","scrollTop","requestFrame","frameRate","wheel","event","target","overflowing","overflowingAncestor","defaultPrevented","ctrlKey","isNodeName","test","src","deltaX","wheelDeltaX","deltaY","wheelDeltaY","isMac","isDivisible","abs","wheelDelta","deltaMode","touchpadSupport","isTouchpad","stepSize","preventDefault","scheduleClearCache","modifier","altKey","metaKey","shiftKey","keyCode","key","spacebar","contains","buttonTypes","nodeName","type","isInsideYoutubeVideo","isContentEditable","clientHeight","up","arrowScroll","down","pageup","pagedown","home","end","damt","right","mousedown","clearTimeout","clearCacheTimer","setInterval","cache","setCache","elems","uniqueID","el","rootScrollHeight","cached","isOverflowCSS","overflowNotHidden","overflowAutoOrScroll","isContentOverflowing","getScrollRoot","parentElement","getComputedStyle","getPropertyValue","overflow","fn","addEventListener","removeEvent","removeEventListener","tag","toLowerCase","direction","deltaBuffer","shift","deltaBufferTimer","localStorage","SS_deltaBuffer","join","allDeltasDivisableBy","n","divisor","floor","isControl","URL","classList","parentNode","pulse_","val","pulseScale","exp","pulseNormalize","SmoothScroll","optionsToSet","defaultOptions","hasOwnProperty","excluded","navigator","platform","split","wheelEvent","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","callback","element","delay","WebKitMutationObserver","MozMutationObserver","SCROLL_ROOT","dummy","bodyScrollTop","removeChild","userAgent","isEdge","isChrome","isSafari","isMobile","isEnabledForBrowser","destroy","disconnect","SmoothScrollOptions","exports","module"],"mappings":"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","file":"SmoothScroll.min.js","sourcesContent":["//\n// SmoothScroll for websites v1.4.0 (Balazs Galambosi)\n// http://www.smoothscroll.net/\n//\n// Licensed under the terms of the MIT license.\n//\n// You may use it in your theme if you credit me. \n// It is also free to use on any individual website.\n//\n// Exception:\n// The only restriction is to not publish any  \n// extension for browsers or native application\n// without getting a written permission first.\n//\n\n(function () {\n  \n// Scroll Variables (tweakable)\nvar defaultOptions = {\n\n    // Scrolling Core\n    frameRate        : 150, // [Hz]\n    animationTime    : 400, // [ms]\n    stepSize         : 100, // [px]\n\n    // Pulse (less tweakable)\n    // ratio of \"tail\" to \"acceleration\"\n    pulseAlgorithm   : true,\n    pulseScale       : 4,\n    pulseNormalize   : 1,\n\n    // Acceleration\n    accelerationDelta : 50,  // 50\n    accelerationMax   : 3,   // 3\n\n    // Keyboard Settings\n    keyboardSupport   : true,  // option\n    arrowScroll       : 50,    // [px]\n\n    // Other\n    touchpadSupport   : false, // ignore touchpad by default\n    fixedBackground   : true, \n    excluded          : ''    \n};\n\nvar options = defaultOptions;\n\n\n// Other Variables\nvar isExcluded = false;\nvar isFrame = false;\nvar direction = { x: 0, y: 0 };\nvar initDone  = false;\nvar root = document.documentElement;\nvar activeElement;\nvar observer;\nvar refreshSize;\nvar deltaBuffer = [];\nvar isMac = /^Mac/.test(navigator.platform);\n\nvar key = { left: 37, up: 38, right: 39, down: 40, spacebar: 32, \n            pageup: 33, pagedown: 34, end: 35, home: 36 };\n\n\n/***********************************************\n * INITIALIZE\n ***********************************************/\n\n/**\n * Tests if smooth scrolling is allowed. Shuts down everything if not.\n */\nfunction initTest() {\n    if (options.keyboardSupport) {\n        addEvent('keydown', keydown);\n    }\n}\n\n/**\n * Sets up scrolls array, determines if frames are involved.\n */\nfunction init() {\n  \n    if (initDone || !document.body) return;\n\n    initDone = true;\n\n    var body = document.body;\n    var html = document.documentElement;\n    var windowHeight = window.innerHeight; \n    var scrollHeight = body.scrollHeight;\n    \n    // check compat mode for root element\n    root = (document.compatMode.indexOf('CSS') >= 0) ? html : body;\n    activeElement = body;\n    \n    initTest();\n\n    // Checks if this script is running in a frame\n    if (top != self) {\n        isFrame = true;\n    }\n\n    /**\n     * Please duplicate this radar for a Safari fix! \n     * rdar://22376037\n     * https://openradar.appspot.com/radar?id=4965070979203072\n     * \n     * Only applies to Safari now, Chrome fixed it in v45:\n     * This fixes a bug where the areas left and right to \n     * the content does not trigger the onmousewheel event\n     * on some pages. e.g.: html, body { height: 100% }\n     */\n    else if (scrollHeight > windowHeight &&\n            (body.offsetHeight <= windowHeight || \n             html.offsetHeight <= windowHeight)) {\n\n        var fullPageElem = document.createElement('div');\n        fullPageElem.style.cssText = 'position:absolute; z-index:-10000; ' +\n                                     'top:0; left:0; right:0; height:' + \n                                      root.scrollHeight + 'px';\n        document.body.appendChild(fullPageElem);\n        \n        // DOM changed (throttled) to fix height\n        var pendingRefresh;\n        refreshSize = function () {\n            if (pendingRefresh) return; // could also be: clearTimeout(pendingRefresh);\n            pendingRefresh = setTimeout(function () {\n                if (isExcluded) return; // could be running after cleanup\n                fullPageElem.style.height = '0';\n                fullPageElem.style.height = root.scrollHeight + 'px';\n                pendingRefresh = null;\n            }, 500); // act rarely to stay fast\n        };\n  \n        setTimeout(refreshSize, 10);\n\n        addEvent('resize', refreshSize);\n\n        // TODO: attributeFilter?\n        var config = {\n            attributes: true, \n            childList: true, \n            characterData: false \n            // subtree: true\n        };\n\n        observer = new MutationObserver(refreshSize);\n        observer.observe(body, config);\n\n        if (root.offsetHeight <= windowHeight) {\n            var clearfix = document.createElement('div');   \n            clearfix.style.clear = 'both';\n            body.appendChild(clearfix);\n        }\n    }\n\n    // disable fixed background\n    if (!options.fixedBackground && !isExcluded) {\n        body.style.backgroundAttachment = 'scroll';\n        html.style.backgroundAttachment = 'scroll';\n    }\n}\n\n/**\n * Removes event listeners and other traces left on the page.\n */\nfunction cleanup() {\n    observer && observer.disconnect();\n    removeEvent(wheelEvent, wheel);\n    removeEvent('mousedown', mousedown);\n    removeEvent('keydown', keydown);\n    removeEvent('resize', refreshSize);\n    removeEvent('load', init);\n}\n\n\n/************************************************\n * SCROLLING \n ************************************************/\n \nvar que = [];\nvar pending = false;\nvar lastScroll = Date.now();\n\n/**\n * Pushes scroll actions to the scrolling queue.\n */\nfunction scrollArray(elem, left, top) {\n    \n    directionCheck(left, top);\n\n    if (options.accelerationMax != 1) {\n        var now = Date.now();\n        var elapsed = now - lastScroll;\n        if (elapsed < options.accelerationDelta) {\n            var factor = (1 + (50 / elapsed)) / 2;\n            if (factor > 1) {\n                factor = Math.min(factor, options.accelerationMax);\n                left *= factor;\n                top  *= factor;\n            }\n        }\n        lastScroll = Date.now();\n    }          \n    \n    // push a scroll command\n    que.push({\n        x: left, \n        y: top, \n        lastX: (left < 0) ? 0.99 : -0.99,\n        lastY: (top  < 0) ? 0.99 : -0.99, \n        start: Date.now()\n    });\n        \n    // don't act if there's a pending queue\n    if (pending) {\n        return;\n    }  \n\n    var scrollWindow = (elem === document.body);\n    \n    var step = function (time) {\n        \n        var now = Date.now();\n        var scrollX = 0;\n        var scrollY = 0; \n    \n        for (var i = 0; i < que.length; i++) {\n            \n            var item = que[i];\n            var elapsed  = now - item.start;\n            var finished = (elapsed >= options.animationTime);\n            \n            // scroll position: [0, 1]\n            var position = (finished) ? 1 : elapsed / options.animationTime;\n            \n            // easing [optional]\n            if (options.pulseAlgorithm) {\n                position = pulse(position);\n            }\n            \n            // only need the difference\n            var x = (item.x * position - item.lastX) >> 0;\n            var y = (item.y * position - item.lastY) >> 0;\n            \n            // add this to the total scrolling\n            scrollX += x;\n            scrollY += y;            \n            \n            // update last values\n            item.lastX += x;\n            item.lastY += y;\n        \n            // delete and step back if it's over\n            if (finished) {\n                que.splice(i, 1); i--;\n            }           \n        }\n\n        // scroll left and top\n        if (scrollWindow) {\n            window.scrollBy(scrollX, scrollY);\n        } \n        else {\n            if (scrollX) elem.scrollLeft += scrollX;\n            if (scrollY) elem.scrollTop  += scrollY;                    \n        }\n        \n        // clean up if there's nothing left to do\n        if (!left && !top) {\n            que = [];\n        }\n        \n        if (que.length) { \n            requestFrame(step, elem, (1000 / options.frameRate + 1)); \n        } else { \n            pending = false;\n        }\n    };\n    \n    // start a new queue of actions\n    requestFrame(step, elem, 0);\n    pending = true;\n}\n\n\n/***********************************************\n * EVENTS\n ***********************************************/\n\n/**\n * Mouse wheel handler.\n * @param {Object} event\n */\nfunction wheel(event) {\n\n    if (!initDone) {\n        init();\n    }\n    \n    var target = event.target;\n    var overflowing = overflowingAncestor(target);\n\n    // use default if there's no overflowing\n    // element or default action is prevented   \n    // or it's a zooming event with CTRL \n    if (!overflowing || event.defaultPrevented || event.ctrlKey) {\n        return true;\n    }\n    \n    // leave embedded content alone (flash & pdf)\n    if (isNodeName(activeElement, 'embed') || \n       (isNodeName(target, 'embed') && /\\.pdf/i.test(target.src)) ||\n       isNodeName(activeElement, 'object')) {\n        return true;\n    }\n\n    var deltaX = -event.wheelDeltaX || event.deltaX || 0;\n    var deltaY = -event.wheelDeltaY || event.deltaY || 0;\n    \n    if (isMac) {\n        if (event.wheelDeltaX && isDivisible(event.wheelDeltaX, 120)) {\n            deltaX = -120 * (event.wheelDeltaX / Math.abs(event.wheelDeltaX));\n        }\n        if (event.wheelDeltaY && isDivisible(event.wheelDeltaY, 120)) {\n            deltaY = -120 * (event.wheelDeltaY / Math.abs(event.wheelDeltaY));\n        }\n    }\n    \n    // use wheelDelta if deltaX/Y is not available\n    if (!deltaX && !deltaY) {\n        deltaY = -event.wheelDelta || 0;\n    }\n\n    // line based scrolling (Firefox mostly)\n    if (event.deltaMode === 1) {\n        deltaX *= 40;\n        deltaY *= 40;\n    }\n    \n    // check if it's a touchpad scroll that should be ignored\n    if (!options.touchpadSupport && isTouchpad(deltaY)) {\n        return true;\n    }\n\n    // scale by step size\n    // delta is 120 most of the time\n    // synaptics seems to send 1 sometimes\n    if (Math.abs(deltaX) > 1.2) {\n        deltaX *= options.stepSize / 120;\n    }\n    if (Math.abs(deltaY) > 1.2) {\n        deltaY *= options.stepSize / 120;\n    }\n    \n    scrollArray(overflowing, deltaX, deltaY);\n    event.preventDefault();\n    scheduleClearCache();\n}\n\n/**\n * Keydown event handler.\n * @param {Object} event\n */\nfunction keydown(event) {\n\n    var target   = event.target;\n    var modifier = event.ctrlKey || event.altKey || event.metaKey || \n                  (event.shiftKey && event.keyCode !== key.spacebar);\n    \n    // our own tracked active element could've been removed from the DOM\n    if (!document.contains(activeElement)) {\n        activeElement = document.activeElement;\n    }\n\n    // do nothing if user is editing text\n    // or using a modifier key (except shift)\n    // or in a dropdown\n    // or inside interactive elements\n    var inputNodeNames = /^(textarea|select|embed|object)$/i;\n    var buttonTypes = /^(button|submit|radio|checkbox|file|color|image)$/i;\n    if ( inputNodeNames.test(target.nodeName) ||\n         isNodeName(target, 'input') && !buttonTypes.test(target.type) ||\n         isNodeName(activeElement, 'video') ||\n         isInsideYoutubeVideo(event) ||\n         target.isContentEditable || \n         event.defaultPrevented   ||\n         modifier ) {\n      return true;\n    }\n    \n    // spacebar should trigger button press\n    if ((isNodeName(target, 'button') ||\n         isNodeName(target, 'input') && buttonTypes.test(target.type)) &&\n        event.keyCode === key.spacebar) {\n      return true;\n    }\n    \n    var shift, x = 0, y = 0;\n    var elem = overflowingAncestor(activeElement);\n    var clientHeight = elem.clientHeight;\n\n    if (elem == document.body) {\n        clientHeight = window.innerHeight;\n    }\n\n    switch (event.keyCode) {\n        case key.up:\n            y = -options.arrowScroll;\n            break;\n        case key.down:\n            y = options.arrowScroll;\n            break;         \n        case key.spacebar: // (+ shift)\n            shift = event.shiftKey ? 1 : -1;\n            y = -shift * clientHeight * 0.9;\n            break;\n        case key.pageup:\n            y = -clientHeight * 0.9;\n            break;\n        case key.pagedown:\n            y = clientHeight * 0.9;\n            break;\n        case key.home:\n            y = -elem.scrollTop;\n            break;\n        case key.end:\n            var damt = elem.scrollHeight - elem.scrollTop - clientHeight;\n            y = (damt > 0) ? damt+10 : 0;\n            break;\n        case key.left:\n            x = -options.arrowScroll;\n            break;\n        case key.right:\n            x = options.arrowScroll;\n            break;            \n        default:\n            return true; // a key we don't care about\n    }\n\n    scrollArray(elem, x, y);\n    event.preventDefault();\n    scheduleClearCache();\n}\n\n/**\n * Mousedown event only for updating activeElement\n */\nfunction mousedown(event) {\n    activeElement = event.target;\n}\n\n\n/***********************************************\n * OVERFLOW\n ***********************************************/\n\nvar uniqueID = (function () {\n    var i = 0;\n    return function (el) {\n        return el.uniqueID || (el.uniqueID = i++);\n    };\n})();\n\nvar cache = {}; // cleared out after a scrolling session\nvar clearCacheTimer;\n\n//setInterval(function () { cache = {}; }, 10 * 1000);\n\nfunction scheduleClearCache() {\n    clearTimeout(clearCacheTimer);\n    clearCacheTimer = setInterval(function () { cache = {}; }, 1*1000);\n}\n\nfunction setCache(elems, overflowing) {\n    for (var i = elems.length; i--;)\n        cache[uniqueID(elems[i])] = overflowing;\n    return overflowing;\n}\n\n//  (body)                (root)\n//         | hidden | visible | scroll |  auto  |\n// hidden  |   no   |    no   |   YES  |   YES  |\n// visible |   no   |   YES   |   YES  |   YES  |\n// scroll  |   no   |   YES   |   YES  |   YES  |\n// auto    |   no   |   YES   |   YES  |   YES  |\n\nfunction overflowingAncestor(el) {\n    var elems = [];\n    var body = document.body;\n    var rootScrollHeight = root.scrollHeight;\n    do {\n        var cached = cache[uniqueID(el)];\n        if (cached) {\n            return setCache(elems, cached);\n        }\n        elems.push(el);\n        if (rootScrollHeight === el.scrollHeight) {\n            var topOverflowsNotHidden = overflowNotHidden(root) && overflowNotHidden(body);\n            var isOverflowCSS = topOverflowsNotHidden || overflowAutoOrScroll(root);\n            if (isFrame && isContentOverflowing(root) || \n               !isFrame && isOverflowCSS) {\n                return setCache(elems, getScrollRoot()); \n            }\n        } else if (isContentOverflowing(el) && overflowAutoOrScroll(el)) {\n            return setCache(elems, el);\n        }\n    } while (el = el.parentElement);\n}\n\nfunction isContentOverflowing(el) {\n    return (el.clientHeight + 10 < el.scrollHeight);\n}\n\n// typically for <body> and <html>\nfunction overflowNotHidden(el) {\n    var overflow = getComputedStyle(el, '').getPropertyValue('overflow-y');\n    return (overflow !== 'hidden');\n}\n\n// for all other elements\nfunction overflowAutoOrScroll(el) {\n    var overflow = getComputedStyle(el, '').getPropertyValue('overflow-y');\n    return (overflow === 'scroll' || overflow === 'auto');\n}\n\n\n/***********************************************\n * HELPERS\n ***********************************************/\n\nfunction addEvent(type, fn) {\n    window.addEventListener(type, fn, false);\n}\n\nfunction removeEvent(type, fn) {\n    window.removeEventListener(type, fn, false);  \n}\n\nfunction isNodeName(el, tag) {\n    return (el.nodeName||'').toLowerCase() === tag.toLowerCase();\n}\n\nfunction directionCheck(x, y) {\n    x = (x > 0) ? 1 : -1;\n    y = (y > 0) ? 1 : -1;\n    if (direction.x !== x || direction.y !== y) {\n        direction.x = x;\n        direction.y = y;\n        que = [];\n        lastScroll = 0;\n    }\n}\n\nvar deltaBufferTimer;\n\nif (window.localStorage && localStorage.SS_deltaBuffer) {\n    deltaBuffer = localStorage.SS_deltaBuffer.split(',');\n}\n\nfunction isTouchpad(deltaY) {\n    if (!deltaY) return;\n    if (!deltaBuffer.length) {\n        deltaBuffer = [deltaY, deltaY, deltaY];\n    }\n    deltaY = Math.abs(deltaY)\n    deltaBuffer.push(deltaY);\n    deltaBuffer.shift();\n    clearTimeout(deltaBufferTimer);\n    deltaBufferTimer = setTimeout(function () {\n        if (window.localStorage) {\n            localStorage.SS_deltaBuffer = deltaBuffer.join(',');\n        }\n    }, 1000);\n    return !allDeltasDivisableBy(120) && !allDeltasDivisableBy(100);\n} \n\nfunction isDivisible(n, divisor) {\n    return (Math.floor(n / divisor) == n / divisor);\n}\n\nfunction allDeltasDivisableBy(divisor) {\n    return (isDivisible(deltaBuffer[0], divisor) &&\n            isDivisible(deltaBuffer[1], divisor) &&\n            isDivisible(deltaBuffer[2], divisor));\n}\n\nfunction isInsideYoutubeVideo(event) {\n    var elem = event.target;\n    var isControl = false;\n    if (document.URL.indexOf ('www.youtube.com/watch') != -1) {\n        do {\n            isControl = (elem.classList && \n                         elem.classList.contains('html5-video-controls'));\n            if (isControl) break;\n        } while (elem = elem.parentNode);\n    }\n    return isControl;\n}\n\nvar requestFrame = (function () {\n      return (window.requestAnimationFrame       || \n              window.webkitRequestAnimationFrame || \n              window.mozRequestAnimationFrame    ||\n              function (callback, element, delay) {\n                 window.setTimeout(callback, delay || (1000/60));\n             });\n})();\n\nvar MutationObserver = (window.MutationObserver || \n                        window.WebKitMutationObserver ||\n                        window.MozMutationObserver);  \n\nvar getScrollRoot = (function() {\n  var SCROLL_ROOT;\n  return function() {\n    if (!SCROLL_ROOT) {\n      var dummy = document.createElement('div');\n      dummy.style.cssText = 'height:10000px;width:1px;';\n      document.body.appendChild(dummy);\n      var bodyScrollTop  = document.body.scrollTop;\n      var docElScrollTop = document.documentElement.scrollTop;\n      window.scrollBy(0, 1);\n      if (document.body.scrollTop != bodyScrollTop)\n        (SCROLL_ROOT = document.body);\n      else \n        (SCROLL_ROOT = document.documentElement);\n      window.scrollBy(0, -1);\n      document.body.removeChild(dummy);\n    }\n    return SCROLL_ROOT;\n  };\n})();\n\n\n/***********************************************\n * PULSE (by Michael Herf)\n ***********************************************/\n \n/**\n * Viscous fluid with a pulse for part and decay for the rest.\n * - Applies a fixed force over an interval (a damped acceleration), and\n * - Lets the exponential bleed away the velocity over a longer interval\n * - Michael Herf, http://stereopsis.com/stopping/\n */\nfunction pulse_(x) {\n    var val, start, expx;\n    // test\n    x = x * options.pulseScale;\n    if (x < 1) { // acceleartion\n        val = x - (1 - Math.exp(-x));\n    } else {     // tail\n        // the previous animation ended here:\n        start = Math.exp(-1);\n        // simple viscous drag\n        x -= 1;\n        expx = 1 - Math.exp(-x);\n        val = start + (expx * (1 - start));\n    }\n    return val * options.pulseNormalize;\n}\n\nfunction pulse(x) {\n    if (x >= 1) return 1;\n    if (x <= 0) return 0;\n\n    if (options.pulseNormalize == 1) {\n        options.pulseNormalize /= pulse_(1);\n    }\n    return pulse_(x);\n}\n\n\n/***********************************************\n * FIRST RUN\n ***********************************************/\n\nvar userAgent = window.navigator.userAgent;\nvar isEdge    = /Edge/.test(userAgent); // thank you MS\nvar isChrome  = /chrome/i.test(userAgent) && !isEdge; \nvar isSafari  = /safari/i.test(userAgent) && !isEdge; \nvar isMobile  = /mobile/i.test(userAgent);\nvar isEnabledForBrowser = (isChrome || isSafari) && !isMobile;\n\nvar wheelEvent;\nif ('onwheel' in document.createElement('div'))\n    wheelEvent = 'wheel';\nelse if ('onmousewheel' in document.createElement('div'))\n    wheelEvent = 'mousewheel';\n\nif (wheelEvent && isEnabledForBrowser) {\n    addEvent(wheelEvent, wheel);\n    addEvent('mousedown', mousedown);\n    addEvent('load', init);\n}\n\n\n/***********************************************\n * PUBLIC INTERFACE\n ***********************************************/\n\nfunction SmoothScroll(optionsToSet) {\n    for (var key in optionsToSet)\n        if (defaultOptions.hasOwnProperty(key)) \n            options[key] = optionsToSet[key];\n}\nSmoothScroll.destroy = cleanup;\n\nif (window.SmoothScrollOptions) // async API\n    SmoothScroll(window.SmoothScrollOptions)\n\nif ('object' == typeof exports)\n    module.exports = SmoothScroll;\nelse\n    window.SmoothScroll = SmoothScroll;\n\n})();"]}